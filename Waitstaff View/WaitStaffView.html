<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Fat Cat Pizza</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/custom.css" rel="stylesheet">
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="css/bootstrap-multiselect.css" type="text/css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/bootstrap-multiselect.js"></script>
    <script src="js/jquery-2.1.3.min.js"></script>
    <script id="notificationJson" type="text/javascript" src="js/waitstaff-notifications.json"></script>
    <script id="tablesJson" type="text/javascript" src="js/tables.json"></script>
    <script type="text/javascript">
      //First Loads data into notifications
      var notifications = data.notifications;
      var past_notifications = [];
      var table_information = tables.Tables;

      //shows the table notifications
      function TableNotifications() {
        var out = "";
        var i = 0;
        var out2 = ""
        //Inserts the code into the header 
        out2 = '<ul class="nav navbar-nav navbar-right"><li class="active"><a href="#drinks" data-toggle="modal" onclick="TableNotifications()">Table Notifications</a></li><li><a href="#food" data-toggle="modal" onclick="PastNotifications()">Past Notifications</a></li><li><a href="#login" data-toggle="modal" onclick="ViewTables()">Tables</a></li></ul>';
        for(i = 0; i < notifications.length; i++)
        {
          out += '<div id="notification-row" class="row">';
          out += '<div class="col-md-6 col-sm-6 col-xs-6">';
          out += '<h3>Table ' + notifications[i].TableNumber + '</h3>';
          out += '<p>'+ notifications[i].Description + '</p>';
          out += '</div>';
          out += '<div class="col-md-6 col-sm-6 col-xs-6" align="right">';
          out += '<h3></h3>';
          //The i is the location when the x is clicked the option is removed
          out += '<a onclick="deleteOption(' + i + ')"><i" class="fa fa-times fa-3x"></i></a>';
          out += '</div>';
          out += '</div>';
        }
        document.getElementById("notificationRows").innerHTML = out;
        document.getElementById("navOptions").innerHTML = out2;
      }

      //Will show past notifications
      function PastNotifications() {
        var out = "";
        var i = 0;
        var out2 = "";
        out2 = '<ul class="nav navbar-nav navbar-right"><li><a href="#drinks" data-toggle="modal" onclick="TableNotifications()">Table Notifications</a></li><li class="active"><a href="#food" data-toggle="modal" onclick="PastNotifications()">Past Notifications</a></li><li><a href="#login" data-toggle="modal" onclick="ViewTables()">Tables</a></li></ul>';
        for(i = 0; i < past_notifications.length; i++)
        {
          out += '<div id="notification-row" class="row">';
          out += '<div class="col-md-6 col-sm-6 col-xs-6">';
          out += '<h3>Table ' + past_notifications[i].TableNumber + '</h3>';
          out += '<p>'+ past_notifications[i].Description + '</p>';
          out += '</div>';
          out += '<div class="col-md-6 col-sm-6 col-xs-6" align="right">';
          out += '<h3></h3>';
          //The i is the location when the x is clicked the option is removed
          out += '<a onclick="deleteOption(' + i + ')"><i" class="fa fa-times fa-3x"></i></a>';
          out += '</div>';
          out += '</div>';
        }
        document.getElementById("notificationRows").innerHTML = out;
        document.getElementById("navOptions").innerHTML = out2;
      }

      //Will show table options
      function ViewTables() {
        console.log(table_information);
        var i = 0;
        var out = "";
        var out2 = "";
        out2 = '<ul class="nav navbar-nav navbar-right"><li><a href="#drinks" data-toggle="modal" onclick="TableNotifications()">Table Notifications</a></li><li><a href="#food" data-toggle="modal" onclick="PastNotifications()">Past Notifications</a></li><li class="active"><a href="#login" data-toggle="modal" onclick="ViewTables()">Tables</a></li></ul>';
        for(i = 0; i < table_information.length; i++)
        {
          out += '<div id="notification-row" class="row">';
          out += '<div class="col-md-6 col-sm-6 col-xs-6">';
          out += '<h3>Table' + table_information[i].TableNumber + '</h3>';
          out += '</div>';
          out += '<div class="col-md-6 col-sm-6 col-xs-6" align="right">';
          //The i is the location when the x is clicked the option is removed
          out += '<a onclick="expand(' + i + ')"><i" class="fa fa-arrow-down fa-3x"></i></a>';
          out += '</div>';
          out += '</div>';
        }
        document.getElementById("notificationRows").innerHTML = out;
        document.getElementById("navOptions").innerHTML = out2;
      }

      //Deletes option when clicked
      function deleteOption(location) {
        past_notifications.unshift(notifications[location]);
        notifications.splice(location, 1);
        TableNotifications();
      }

      function expand(location) {
        var out = "";
        var pizzaPrice = 10;
        var drinkPrice = 0;
        var totalPrice = 0;
        var tipPrice = 0;
        for(i = 0; i < table_information.length; i++)
        {
          if(location == i)
          {
            out += '<div id="notification-row" class="row">';
            out += '<div class="col-md-6 col-sm-6 col-xs-6">';
            out += '<h3>Table' + table_information[i].TableNumber + '</h3>';
            out += '</div>';
            out += '<div class="col-md-6 col-sm-6 col-xs-6" align="right">';
            //The i is the location when the x is clicked the option is removed
            out += '<a onclick="ViewTables()"><i" class="fa fa-arrow-down fa-3x"></i></a>';
            out += '</div>';
            out += '<div id="expandedTable">'
            out += '<div class="col-md-12 col-sm-12 col-xs-12">';
            out += '<h4 id="TableTitle">Drinks</h4>';
            out += '<table class="table table-striped" width="100%">';
            out += '<thead>';
            out += '<tr>';
            out += '<th class="col-md-2 col-sm-2 col-xs-2">Guest</th>';
            out += '<th class="col-md-6 col-sm-6 col-xs-6">Drink</th>';
            out += '<th class="col-md-2 col-sm-2 col-xs-2">Price</th>'
            out += '<th class="col-md-2 col-sm-2 col-xs-2">Remove</th>';
            out += '</tr>';
            out += '</thead>';
            out += '<tbody>';
            var j = 0;
            for(j = 0; j < table_information[i].Customers.length; j++)
            {
              out += '<tr>';
              out += '<th>' + table_information[i].Customers[j].Name + '</th>';
              out += '<th>' + table_information[i].Customers[j].Drink + '</th>';
              if(table_information[i].Customers[j].Drink == "Water") drinkPrice = 0;
              else drinkPrice = 1;
              totalPrice += drinkPrice;
              out += '<th>' + drinkPrice.toFixed(2) + '</th>'
              out += '<th><a href="#" class="btn btn-default" data-toggle="modal" data-dismiss="modal">Remove</a></th></tr>';
            }
            out += '</tbody>';
            out += '</table>';
            out += '<h4 id="TableTitle">Pizza</h4>';
            out += '<table class="table table-striped">';
            out += '<thead>';
            out += '<tr>';
            out += '<th class="col-md-2 col-sm-2 col-xs-2">Pizza</th>';
            out += '<th class="col-md-1 col-sm-1 col-xs-1">Crust</th>';
            out += '<th class="col-md-1 col-sm-1 col-xs-1">Sauce</th>';
            out += '<th class="col-md-2 col-sm-2 col-xs-2">Cheese</th>';
            out += '<th class="col-md-2 col-sm-2 col-xs-2">Toppings</th>';
            out += '<th class="col-md-2 col-sm-2 col-xs-2">Price</th>';
            out += '<th class="col-md-2 col-sm-2 col-xs-2">Remove</th>';
            out += '</tr>';
            out += '</thead>';
            out += '<tbody>';
            var j = 0;
            for(j = 0; j < table_information[i].Pizza.length; j++)
            {
              out += '<tr>';
              out += '<th>Pizza ' + (i + 1) + '</th>';
              out += '<th>' + table_information[i].Pizza[j].Crust + '</th>';
              out += '<th>' + table_information[i].Pizza[j].Sauce + '</th>';
              out += '<th>' + table_information[i].Pizza[j].Cheese + '</th>';
              out += '<th>';
              var k = 0;
              for(k = 0; k < table_information[i].Pizza[j].Toppings.length; k++)
              {
                out += '<p>' + table_information[i].Pizza[j].Toppings[k] + '</p>';
                pizzaPrice += .3;
              }
              out += '</th>';
              out += '<th>' + pizzaPrice.toFixed(2) + '</th>';
              totalPrice += pizzaPrice;
              pizzaPrice = 10;
              out += '<th><a href="#" class="btn btn-default" data-toggle="modal" data-dismiss="modal">Remove</a></th></tr>';
            }
            out += '</tbody>';
            out += '</table>';
            out += '<h4 id="TableTitle">Total</h4>';
            out += '<table class="table table-striped">';
            out += '<tbody>';
            out += '<tr>';
            out += '<th class="col-md-8 col-sm-8 col-xs-8">Tip</th>';
            out += '<th class="col-md-2 col-sm-2 col-xs-2">' + tipPrice.toFixed(2) + '</th>';
            out += '<th class="col-md-2 col-sm-2 col-xs-2"><a href="#" class="btn btn-default" data-toggle="modal" data-dismiss="modal">Add Tip</a></th>';
            out += '</tr>';
            out += '<tr>';
            out += '<th>Total</th>';
            out += '<th>' + totalPrice.toFixed(2) + '</th>';
            out += '<th></th>';
            out += '</tr>';
            out += '</tbody>';
            out += '</table>';
            out += '</div>'
            out += '</div>';
            out += '</div>';
          }
          else {
          out += '<div id="notification-row" class="row">';
          out += '<div class="col-md-6 col-sm-6 col-xs-6">';
          out += '<h3>Table' + table_information[i].TableNumber + '</h3>';
          out += '</div>';
          out += '<div class="col-md-6 col-sm-6 col-xs-6" align="right">';
          //The i is the location when the x is clicked the option is removed
          out += '<a onclick="expand(' + i + ')"><i" class="fa fa-arrow-down fa-3x"></i></a>';
          out += '</div>';
          out += '</div>';
          }
        }
        document.getElementById("notificationRows").innerHTML = out;
      }
    </script>
  </head>
  <body onload="TableNotifications()">
    <!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Wait Staff View</a>
        </div>
        <div id="navOptions" class="navbar-collapse collapse">
        </div><!--/.nav-collapse -->
      </div>
    </div>

    <!-- Table Notifications -->
    <div id="notificationRows" class="container">
    </div>

    <!-- Fixed footer -->
    <div class="navbar navbar-inverse navbar-fixed-bottom" role="navigation">
    	<div class="container">
    		<div class="navbar-text pull-left">
    			<p id="table"><a href="#logout" data-toggle="modal">Tyler Page</a>
    		</div>
    		<div class="navbar-text pull-right">
    			<a href="#"><i class="fa fa-facebook-square fa-2x"></i></a>
    			<a href="#"><i class="fa fa-twitter fa-2x"></i></a>
    		</div>
    	</div>
    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>